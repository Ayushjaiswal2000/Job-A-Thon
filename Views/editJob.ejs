<style>
    .row {
      display: flex !important;
     
    
   
    }

    .form-group label {
      flex: 1;
      margin-right: 10px;
     
    }
    .form-group {
        margin-top: 20px;
    }

    .dropdown {
      position: relative;
      width: 100%;
    }

    .dropdown select {
      width: 100%;
      padding: 10px;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23000000' width='24px' height='24px'%3E%3Cpath d='M7 10l5 5 5-5H7z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 10px top 50%;
      background-size: 20px 20px;
      border: 1px solid #ced4da;
      border-radius: 5px;
      font-size: 16px;
    }

    .dropdown select:focus {
      outline: none;
      border-color: #007bff;
    }
 
    form {
      
      width: 50%; /* Adjust width as needed */
      background-color: #f8f9fa; /* Light grey background */
      
      border-radius: 10px;
      box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.1); /* Add shadow */
    }
    .center{
      display: flex;
      justify-content: center;
    }
    .form-control {
      background-color: #f9f1e7; /* Light orange background for fields */
    }
    .btn-primary {
      background-color: #ff9800; /* Orange button */
      border-color: #ff9800; /* Orange border for button */
    }
    .btn-primary:hover {
      background-color: #f57c00; /* Darker shade of orange on hover */
      border-color: #f57c00; /* Darker shade of orange border on hover */
    }
    h1 {
      text-align: center; /* Center align the heading */
      margin-bottom: 20px; /* Add some space below the heading */
      color: #333;
      font-size: 1.5rem; /* Set color to dark grey */
    }
    .badge-primary {
    background-color: #ff9800; /* Orange background */
    color: #fff !important; /* White text color */
  }

  /* Style for the container div */
  #selectedSkillsContainer {
    padding: 10px; /* Add padding for spacing */
    border: 1px solid #ddd; /* Add border */
    border-radius: 5px; /* Add border radius */
    box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1); /* Add box shadow */
    margin-top: 10px; /* Add margin to separate from other elements */
  }

  .dropdown {
    position: relative;
    width: 100%;
  }

  .dropdown select {
    width: 100%;
    padding: 10px;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23000000' width='24px' height='24px'%3E%3Cpath d='M7 10l5 5 5-5H7z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 10px top 50%;
    background-size: 20px 20px;
    border: 1px solid #ced4da;
    border-radius: 5px;
    font-size: 16px;
  }

  .dropdown select:focus {
    outline: none;
    border-color: #007bff;
  }
  </style>



<% if (job) { %>
    <div class="container">
        <div class="center">
            <form action="/editJob/<%= job.id %>" method="post" class="p-5" id="registerForm">
                <h1>Edit Job</h1>
                <!-- Job Details -->
                <div class="row">
                    <div class="form-group col-md-6">
                        <label for="jobTitle"><i class="fas fa-briefcase"></i> Job Title</label>
                        <input
                            type="text"
                            class="form-control"
                            id="jobTitle"
                            placeholder="Job Title"
                            name="jobTitle"
                            value="<%= job.title %>"
                        />
                    </div>
                    <div class="form-group col-md-6">
                        <label for="company"><i class="fas fa-building"></i> Company</label>
                        <input
                            type="text"
                            class="form-control"
                            id="company"
                            placeholder="Company"
                            name="company"
                            value="<%= job.company %>"
                        />
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-6">
                        <label for="location"><i class="fas fa-map-marker-alt"></i> Location</label>
                        <div class="dropdown">
                            <select class="form-control" id="location" name="location">
                                <option value="" disabled>Select a location</option>
                                <option value="India" <% if (job.location === 'India') { %> selected <% } %>>India</option>
                                <option value="Nepal" <% if (job.location === 'Nepal') { %> selected <% } %>>Nepal</option>
                                <option value="Bhutan" <% if (job.location === 'Bhutan') { %> selected <% } %>>Bhutan</option>
                                <!-- Add more options for other countries as needed -->
                            </select>
                        </div>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="salary"><i class="fas fa-money-bill-wave"></i> Salary</label>
                        <div class="dropdown">
                            <select class="form-control" id="salary" name="salary">
                                <option value="" disabled>Select a salary range</option>
                                <option value="2-4 LPA" <% if (job.salary === '2-4 LPA') { %> selected <% } %>>2-4 LPA</option>
                                <option value="4-6 LPA" <% if (job.salary === '4-6 LPA') { %> selected <% } %>>4-6 LPA</option>
                                <option value="6-8 LPA" <% if (job.salary === '6-8 LPA') { %> selected <% } %>>6-8 LPA</option>
                                <!-- Add more options for other salary ranges as needed -->
                            </select>
                        </div>
                    </div>
                </div>
                <!-- Include other form fields with corresponding values -->
                <!-- Description field on its own row -->
                <div class="row">
                <div class="form-group col-md-6">
                    <label for="experience"><i class="fas fa-clock"></i> Experience</label>
                    <div class="dropdown">
                        <select class="form-control" id="experience" name="experience">
                            <option value="" disabled>Select an experience range</option>
                            <option value="0-1 years" <% if (job.experience === '0-1 years') { %> selected <% } %>>0-1 years</option>
                            <option value="1-2 years" <% if (job.experience === '1-2 years') { %> selected <% } %>>1-2 years</option>
                            <option value="2-3 years" <% if (job.experience === '2-3 years') { %> selected <% } %>>2-3 years</option>
                            <!-- Add more options for other experience ranges as needed -->
                        </select>
                    </div>
                </div>
                
                <!-- Active field -->
                <div class="form-group col-md-6">
                    <label for="active"><i class="fas fa-toggle-on"></i> Active</label>
                    <div class="dropdown">
                        <select class="form-control" id="active" name="active">
                            <option value="" disabled>Status of Job</option>
                            <option value="true" <% if (job.active === true) { %> selected <% } %>>Hiring</option>
                            <option value="false" <% if (job.active === false) { %> selected <% } %>>Not Hiring</option>
                        </select>
                    </div>
                </div>
            </div>
                
                <!-- Apply By field -->
                <div class="row">
                <div class="form-group col-md-6">
                    <label for="applyBy"><i class="far fa-calendar-alt"></i> Apply By</label>
                    <input
                        type="date"
                        class="form-control"
                        id="applyBy"
                        name="applyBy"
                        value="<%= job.applyBy %>"
                    />
                </div>
                
                <!-- Openings field -->
                <div class="form-group col-md-6">
                    <label for="openings"><i class="fas fa-users"></i> Openings</label>
                    <input
                        type="number"
                        class="form-control"
                        id="openings"
                        placeholder="Openings"
                        name="openings"
                        value="<%= job.openings %>"
                    />
                </div>
            </div>
                <div class="row">
                    <div class="form-group col-md-12">
                        <label for="description"><i class="fas fa-file-alt"></i> Description</label>
                        <textarea
                            class="form-control"
                            id="description"
                            placeholder="Description"
                            name="description"
                            rows="4"
                        ><%= job.description %></textarea>
                    </div>
                </div>
                <!-- Selected Skills -->
                <div class="row">
                    <div class="form-group col-md-6">
                        <label for="selectedSkills" style="margin-bottom: 0;"><i class="fas fa-tools"></i> Selected Skills:</label>
                        <div id="selectedSkillsContainer" style="height: 100px; overflow-y: auto;">
                            <% job.skills.forEach(skill => { %>
                                <span class="badge badge-primary mr-2"><%= skill %></span>
                                <input type="hidden" name="selectedSkills[]" value="<%= skill %>">
                            <% }); %>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <button type="button" class="btn btn-primary" style="margin-top: 70px;" data-toggle="modal" data-target="#skillsModal">
                            <i class="fas fa-plus"></i> Select Skills
                        </button>
                    </div>
                </div>
                <!-- End Selected Skills -->
                <button type="submit" class="btn btn-primary mt-6"><i class="fas fa-save"></i> Save</button>
            </form>
        </div>
    </div>

    <!-- Skills Modal -->
   <!-- Skills Modal -->
<div class="modal fade" id="skillsModal" tabindex="-1" role="dialog" aria-labelledby="skillsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="skillsModalLabel">Select Skills</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- Skills checkboxes -->
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="selectedSkills[]" id="java" value="Java" <% if (job.skills.includes('Java')) { %> checked <% } %>>
                    <label class="form-check-label" for="java">
                      Java
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="selectedSkills[]" id="python" value="Python" <% if (job.skills.includes('Python')) { %> checked <% } %>>
                    <label class="form-check-label" for="python">
                      Python
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="selectedSkills[]" id="javascript" value="JavaScript" <% if (job.skills.includes('JavaScript')) { %> checked <% } %>>
                    <label class="form-check-label" for="javascript">
                      JavaScript
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="selectedSkills[]" id="Frontend Developer" value="Frontend Developer" <% if (job.skills.includes('Frontend Developer')) { %> checked <% } %>>
                    <label class="form-check-label" for="Frontend Developer">
                      Frontend Developer
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="selectedSkills[]" id="Backend Developer" value="Backend Developer" <% if (job.skills.includes('Backend Developer')) { %> checked <% } %>>
                    <label class="form-check-label" for="Backend Developer">
                      Backend Developer
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="selectedSkills[]" id="DotNet" value="DotNet" <% if (job.skills.includes('DotNet')) { %> checked <% } %>>
                    <label class="form-check-label" for="DotNet">
                      DotNet
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="selectedSkills[]" id="React Js" value="React" <% if (job.skills.includes('React')) { %> checked <% } %>>
                    <label class="form-check-label" for="React Js">
                      React Js
                    </label>
                </div>
                <!-- Add more checkboxes as needed -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="addSelectedSkills()">Add Selected Skills</button>
            </div>
        </div>
    </div>
</div>


    <!-- JavaScript for adding selected skills -->
   <!-- JavaScript for adding selected skills -->
<!-- JavaScript for adding selected skills -->
<!-- JavaScript for adding selected skills -->
<script>
    function addSelectedSkills() {
        // Get selected skills from the checkboxes
        const selectedSkillsCheckboxes = document.querySelectorAll('input[name="selectedSkills[]"]:checked');

        // Convert the NodeList to an array of skill names
        const selectedSkills = Array.from(selectedSkillsCheckboxes).map(skill => skill.value.trim());

        // Get already selected skills
        const selectedSkillsContainer = document.getElementById('selectedSkillsContainer');
        const alreadySelectedSkills = Array.from(selectedSkillsContainer.querySelectorAll('span'));

        // Remove unchecked skills from selectedSkillsContainer
        alreadySelectedSkills.forEach(skillBadge => {
            const skillName = skillBadge.textContent.trim();
            if (!selectedSkills.includes(skillName)) {
                skillBadge.remove(); // Remove the skill badge
                const correspondingInput = document.querySelector(`input[value="${skillName}"]`);
                if (correspondingInput) {
                    correspondingInput.remove(); // Remove the corresponding hidden input
                }
            }
        });

        // Add newly selected skills to selectedSkillsContainer
        selectedSkills.forEach(skill => {
            if (!alreadySelectedSkills.some(skillBadge => skillBadge.textContent.trim() === skill)) {
                const skillBadge = document.createElement('span');
                skillBadge.classList.add('badge', 'badge-primary', 'mr-2');
                skillBadge.textContent = skill;
                selectedSkillsContainer.appendChild(skillBadge);
                const skillInput = document.createElement('input');
                skillInput.type = 'hidden';
                skillInput.name = 'selectedSkills[]';
                skillInput.value = skill;
                selectedSkillsContainer.appendChild(skillInput);
            }
        });

        // Close the modal (if needed)
        $('#skillsModal').modal('hide');
    }
</script>


<% } %>

  

